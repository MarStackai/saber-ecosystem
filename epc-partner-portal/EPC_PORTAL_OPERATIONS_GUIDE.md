# EPC Partner Portal - Operations Guide
## Version 1.0 - September 2025

---

## üéØ Quick Reference

**Production URL**: https://epc.saberrenewable.energy  
**Support Email**: sysadmin@saberrenewables.com  
**SharePoint Site**: https://saberrenewables.sharepoint.com/sites/SaberEPCPartners

---

## üìã Table of Contents

1. [System Overview](#system-overview)
2. [Invitation Management](#invitation-management)
3. [Application Processing](#application-processing)
4. [Troubleshooting Guide](#troubleshooting-guide)
5. [Common Operations](#common-operations)
6. [Emergency Procedures](#emergency-procedures)

---

## üèóÔ∏è System Overview

The EPC Partner Portal is a web application for managing EPC contractor applications and partnerships. The system integrates with SharePoint for invitation management and uses Cloudflare's edge infrastructure for high performance and reliability.

### Key Components
- **Frontend Application**: Next.js application for partner registration
- **Database**: Cloudflare D1 (edge database) for data storage
- **File Storage**: Cloudflare R2 for document uploads
- **Integration**: SharePoint for invitation codes and communications

### Access Points
- **Partner Application Form**: https://epc.saberrenewable.energy/form
- **Invitation Entry**: https://epc.saberrenewable.energy/invite.html
- **SharePoint Admin**: https://saberrenewables.sharepoint.com/sites/SaberEPCPartners

---

## üì® Invitation Management

### Creating New Invitations

1. **Via SharePoint/Power Automate**:
   - Navigate to SharePoint EPC Partners site
   - Add new item to "EPC Invitations" list
   - Power Automate generates 8-character code automatically
   - Email is sent to partner with invitation link

2. **Invitation URL Format**:
   ```
   https://epc.saberrenewable.energy/invite.html?invitationCode=XXXXXXXX
   ```

### Active Invitation Codes
Invitation codes are managed through SharePoint and generated by Power Automate. Each code is unique and tied to a specific company invitation. Check the SharePoint "EPC Invitations" list for current active codes.

### Manual Code Entry
Partners can enter codes manually at:
```
https://epc.saberrenewable.energy/invite.html
```

---

## üìù Application Processing

### Application Flow

1. **Partner receives invitation email** with unique code
2. **Clicks invitation link** ‚Üí Validates code
3. **Pre-populates form** with company name and email
4. **Completes 6-step form**:
   - Step 1: Company Information
   - Step 2: Contact Details
   - Step 3: Capabilities
   - Step 4: Roles & Responsibilities
   - Step 5: Compliance & Insurance
   - Step 6: Agreement & Submission
5. **Auto-saves progress** every 3 seconds
6. **Submits to SharePoint** for processing

### Viewing Applications

Applications are stored in:
1. **Cloudflare D1 Database** (immediate access)
2. **SharePoint List** "EPC Onboarding" (for processing)

### Application Status Tracking
- **Draft**: Auto-saved, not submitted
- **Submitted**: Completed and sent to SharePoint
- **Under Review**: Being processed by team
- **Approved**: Partner accepted
- **Rejected**: Application declined

---

## üîß Troubleshooting Guide

### Common Issues & Solutions

#### Issue: Invitation Code Not Working
**Symptoms**: "Invalid or expired invitation code" message
**Solutions**:
1. Verify code is exactly 8 characters
2. Check code exists in SharePoint list
3. Ensure status is "Active"
4. Try uppercase version of code

#### Issue: Form Not Pre-populating
**Symptoms**: Company name/email fields empty
**Solutions**:
1. Clear browser cache
2. Use invitation URL (not direct form link)
3. Check if draft exists (may override pre-population)

#### Issue: Upload Failures
**Symptoms**: File upload errors
**Solutions**:
1. Verify file size < 10MB
2. Check file format (PDF, DOC, DOCX, JPG, PNG)
3. Ensure stable internet connection

#### Issue: Form Won't Submit
**Symptoms**: Submit button not working
**Solutions**:
1. Check all required fields completed
2. Verify all agreements checked
3. Check browser console for errors
4. Try different browser

---

## üéØ Common Operations

### Clear a Saved Draft
```bash
# Using API
curl -X POST https://epc.saberrenewable.energy/api/clear-draft \
  -H "Content-Type: application/json" \
  -d '{"invitationCode":"XXXXXXXX"}'
```

### Validate an Invitation Code
```bash
curl -X POST https://epc.saberrenewable.energy/api/validate-invitation \
  -H "Content-Type: application/json" \
  -d '{"invitationCode":"XXXXXXXX"}'
```

### Check System Status
1. Visit: https://epc.saberrenewable.energy
2. Check Cloudflare dashboard: https://dash.cloudflare.com
3. Verify SharePoint connectivity

### Export Application Data
1. Access SharePoint "EPC Onboarding" list
2. Export to Excel
3. Or query D1 database via Wrangler CLI

---

## üö® Emergency Procedures

### System Down
1. **Check Cloudflare Status**: https://www.cloudflarestatus.com
2. **Verify DNS**: Ensure domain resolves correctly
3. **Check SharePoint**: Confirm SharePoint site accessible
4. **Contact Support**: Email sysadmin@saberrenewables.com

### Data Recovery
- **Drafts**: Stored in D1 database, auto-recovered
- **Submissions**: Backed up in SharePoint
- **Files**: Stored in R2, persistent storage

### Rollback Procedure
1. Access Cloudflare Pages dashboard
2. Navigate to deployments
3. Select previous working deployment
4. Click "Rollback to this deployment"

---

## üìä Monitoring & Metrics

### Key Metrics to Track
- **Daily Applications**: New submissions per day
- **Completion Rate**: Started vs completed applications
- **Error Rate**: Failed validations or submissions
- **Response Time**: Page load performance

### Where to Monitor
- **Cloudflare Analytics**: Traffic and performance
- **SharePoint Lists**: Application counts
- **Browser Console**: Client-side errors

---

## üîê Security Notes

### Data Protection
- All data encrypted in transit (HTTPS)
- Invitation codes are case-insensitive
- Auto-save data isolated per invitation code
- File uploads require valid session

### Access Control
- SharePoint manages admin access
- Invitation codes expire after use
- No public registration (invitation only)

---

## üìû Support Contacts

**Technical Issues**:
- Email: sysadmin@saberrenewables.com
- Include: Screenshot, invitation code, browser info

**Business Queries**:
- SharePoint site owners
- Partner development team

**Emergency**:
- Cloudflare Support (if account holder)
- IT Operations team

---

## üìö Additional Resources

- **SharePoint Site**: [EPC Partners](https://saberrenewables.sharepoint.com/sites/SaberEPCPartners)
- **Cloudflare Docs**: [Pages Documentation](https://developers.cloudflare.com/pages/)
- **System Architecture**: See technical documentation

---

*Last Updated: September 14, 2025*  
*Version: 1.0*  
*Document Owner: Saber Renewables IT Operations*